---
// src/pages/index.astro - HOMEPAGE kama CORREGIDO CON CATEGOR√çAS
import Layout from '../components/layout/Layout.astro';
import Hero from '../components/astro/Hero.astro';
import FeaturedProductsSection from '../components/astro/FeaturedProductsSection.astro';
import CategoriesSection from '../components/astro/CategoriesSection.astro';

// ‚úÖ IMPORTACI√ìN CORREGIDA - Importar ambas funciones
import { getFeaturedProducts, getCategories } from '../lib/supabase';
import type { Product, Category } from '../lib/types';

// Obtener datos reales
let featuredProducts: Product[] = [];
let categories: Category[] = [];

try {
  // Obtener productos destacados y categor√≠as en paralelo
  [featuredProducts, categories] = await Promise.all([
    getFeaturedProducts(4), // Solo 2 productos
    getCategories()
  ]);
  
  console.log('üè† kama Homepage cargada:');
  console.log(`   - Productos destacados: ${featuredProducts.length}`);
  console.log(`   - Categor√≠as: ${categories.length}`);
  
} catch (error) {
  console.error('‚ùå Error cargando datos del homepage:', error);
  // Continuar con arrays vac√≠os - la p√°gina seguir√° funcionando
}
---

<Layout 
  title="Kamasex.shop - Bienestar √çntimo Femenino"
  description="Productos de bienestar √≠ntimo para la mujer moderna. Calidad premium, env√≠o discreto y atenci√≥n personalizada."
>
  
  <!-- Hero Section -->
  <Hero />

  <!-- Productos Destacados Section -->
  <FeaturedProductsSection products={featuredProducts} />

  <!-- ‚úÖ AGREGAR: Categor√≠as Section -->
  <CategoriesSection categories={categories} />

   <section class="mt-16 bg-white rounded-lg border p-8">
        <div class="text-center">
          <h2 class="text-2xl font-bold text-gray-900 mb-4">¬øNo encuentras lo que buscas?</h2>
          <p class="text-gray-600 mb-6 max-w-2xl mx-auto">
            Nuestro equipo est√° constantemente actualizando nuestro cat√°logo. 
            Cont√°ctanos si hay algo espec√≠fico que te gustar√≠a encontrar.
          </p>
          <a 
            href="/contacto" 
            class="inline-flex items-center px-6 py-3 border border-transparent rounded-md shadow-sm text-base font-medium text-white bg-gray-900 hover:bg-gray-800 transition-colors"
          >
            Cont√°ctanos
          </a>
        </div>
      </section>
</Layout>